<div class="container">

    <div class="row" style="height:80vh;">
      <div style="width:20%;">
        <div style="width:100%; height:30%;"></div>
        <div style="width:100%; height:40%;">
          <div class="row" style="height:100%;" >
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
            <div style="width:7%;height:100%"></div>
          </div>
        </div>
        <div style="width:100%; height:30%;"></div>
      </div>
      <div style="width:60%;">
        <div style="width:100%; height:10%;border-style: solid;">
          <h3 id="logger" align="center"></h3>
        </div>
        <div style="width:100%; height:90%;">
          <video src="" id="video" style="width: 100%;height: 100%;border-style:dotted;" autoplay="true"></video>
          <canvas style="display:none;" id="preview"></canvas>
          <script type="text/javascript">
              var canvas = document.getElementById("preview");
              var context = canvas.getContext("2d");

              canvas.width= 800;
              canvas.height= 600;

              context.width= canvas.width;
              context.height= canvas.height;

              var video= document.getElementById("video");
              var socket = io();

              function logger(msg){
                  $("#logger").text(msg);
              };

              function loadCam(stream){
                  video.srcObject = stream; 
                  logger("Camara correctamente");
              };
              
              function loadFail(){
                  logger("Error en camara");
              };

              function viewVideo(video,context){
                  context.drawImage(video,0,0,context.width,context.height);
                  socket.emit('flujo', canvas.toDataURL('image/webp'));
              };
              $(function(){
                  navigator.getUserMedia = ( navigator.getUserMedia || navigator.webkitGetUserMedia 
                  || navigator.mozGetUserMedia || navigator.msgGetUserMedia);

                  if(navigator.getUserMedia){
                      navigator.getUserMedia({video:true}, loadCam, loadFail);
                  }
                  setInterval(()=>{
                      viewVideo(video,context);
                  },70);
              });
          </script>
        </div>
        
      </div>
      <div style="width:20%;">
        <div style="width:100%; height:30%;"></div>
        <div style="width:100%; height:40%;">
          <div class="row" style="height:100%;" >
            <div style="width:7%;height:100%;"></div>
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
            <div style="width:31%;height:100%;">
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
              <div style="height:33.3%; border-style: solid;"></div>
            </div>
          </div>
        </div>
        <div style="width:100%; height:30%;"></div>
      </div>
    </div>
    <div class="row" style="height: 20vh;">
      <div style="width:100%; border-style: solid;">
        
      </div>
    </div>
  </div>